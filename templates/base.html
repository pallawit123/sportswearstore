{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">

    <!-- Bootstrap Icons for the search icon -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
      /* Custom Dropdown Styling */
      .dropdown-menu {
        transform: translateX(0) !important;
        max-width: 95vw;
        overflow-x: auto;
      }

      .dropdown-menu.adjust-left {
        left: auto !important;
        right: 0;
      }

      .navbar-nav .nav-item {
        margin-right: 20px;
      }

      /* Center the main navigation items */
      .navbar-nav.center-nav {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }

      /* Prevent dropdown from going off-screen */
      @media (max-width: 768px) {
        .dropdown-menu {
          left: 0 !important;
          right: 0 !important;
        }
        
        /* Adjust center nav position for mobile */
        .navbar-nav.center-nav {
          position: relative;
          left: 0;
          transform: none;
          margin: 1rem 0;
        }
      }

      /* Ensure the dropdown columns don't stack */
      .dropdown-menu .row {
        display: flex;
        flex-wrap: nowrap;
      }

      /* Hide search form by default */
      #searchForm {
        display: none;
        flex: 1;
        margin-left: 10px;
      }
    </style>

    <title>{% block title %}{% endblock title %} AthleTech</title>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="z-index: 1030; position: relative;">
      <a class="navbar-brand" href="{% url 'myapp' %}">AthleTech</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <!-- Center navigation items -->
        <ul class="navbar-nav center-nav">
          <!-- Men Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="{% url 'newarrival' %}" id="menDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Men
            </a>
            <div class="dropdown-menu adjust-left" aria-labelledby="menDropdown">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Trending Now</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">New Arrivals</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Autumn Winter '23</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Topwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Tshirts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Polos</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Bottomwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Shorts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Skirts</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Shop by Activity</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Running</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Yoga</a>
                </div>
              </div>
            </div>
          </li>

          <!-- Women Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="womenDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Women
            </a>
            <div class="dropdown-menu adjust-left" aria-labelledby="womenDropdown">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Trending Now</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">New Arrivals</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Autumn Winter '23</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Topwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Tshirts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Polos</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Bottomwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Shorts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Skirts</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Shop by Activity</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Running</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Yoga</a>
                </div>
              </div>
            </div>
          </li>

          <!-- Kids Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="kidsDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Kids
            </a>
            <div class="dropdown-menu adjust-left" aria-labelledby="kidsDropdown">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Trending Now</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">New Arrivals</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Autumn Winter '23</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Topwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Tshirts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Polos</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Bottomwear</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Shorts</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Skirts</a>
                </div>
                <div class="col-sm-3">
                  <h6 class="dropdown-header">Shop by Activity</h6>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Running</a>
                  <a class="dropdown-item" href="{% url 'New Arrivals' %}">Yoga</a>
                </div>
              </div>
            </div>
          </li>

          <!-- Contact Us Link -->
          <li class="nav-item">
            <a class="nav-link" href="/contact-us">Contact Us</a>
          </li>
        </ul>

        <!-- Search form with the search icon -->
        <form class="form-inline ml-auto" style="display: flex; align-items: center;">
          <div class="input-group" id="searchForm">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </div>
          <!-- Search Icon -->
          <button type="button" class="btn btn-link" id="searchIcon">
            <i class="bi bi-search" style="font-size: 1.5rem;"></i>
          </button>
        </form>
      </div>
    </nav>

    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
      </button>
    </div>
    {% endfor %}
    {% endif %}

    {% block body %}{% endblock %}

    <!-- JavaScript dependencies -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

    <!-- JavaScript to toggle search form visibility -->
    <script>
      document.getElementById('searchIcon').addEventListener('click', function() {
        var searchForm = document.getElementById('searchForm');
        if (searchForm.style.display === 'none' || searchForm.style.display === '') {
          searchForm.style.display = 'flex';  // Show the search form
        } else {
          searchForm.style.display = 'none';  // Hide the search form
        }
      });
    </script>
  </body>
</html>
